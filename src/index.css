@tailwind base;
@tailwind components;
@tailwind utilities;

/* Lila Dark Theme Design System - All colors MUST be HSL */

@layer base {
  :root {
    /* Lila Design Tokens - Global Application */
    --background: 230 45% 9%;           /* #0F1020 */
    --foreground: 254 100% 91%;         /* #E9E7FF */
    
    /* Surface Colors */
    --surface: 230 32% 13%;             /* #17182B */
    --surface-foreground: 254 100% 91%; /* #E9E7FF */
    
    /* Text Colors */
    --text-primary: 254 100% 91%;       /* #E9E7FF */
    --text-secondary: 254 59% 78%;      /* #BDB8E6 */
    --text-secondary-hover: 254 59% 85%; /* #BDB8E6 with 80% opacity hover */
    
    /* Icon Colors */
    --icon-default: 254 59% 78%;        /* #BDB8E6 */
    --icon-muted: 248 37% 60%;          /* #8A85B6 */
    --icon-active: 270 95% 75%;         /* #A78BFA */
    
    /* Accent Colors */
    --accent-primary: 270 95% 75%;      /* #A78BFA */
    --accent-hover: 270 91% 65%;        /* #8B5CF6 */
    
    /* Status Colors */
    --status-ok: 151 55% 53%;           /* #34D399 */
    --status-warn: 45 93% 58%;          /* #FCD34D */
    --status-bad: 0 85% 70%;            /* #F87171 */
    
    /* Border & Input */
    --border: 230 30% 20%;              /* #232445 */
    --input: 230 32% 13%;               /* #17182B */
    --ring: 270 95% 75%;                /* #A78BFA */
    
    /* Standard Tokens (mapped to Lila) */
    --card: var(--surface);
    --card-foreground: var(--surface-foreground);
    --popover: var(--surface);
    --popover-foreground: var(--surface-foreground);
    --primary: var(--accent-primary);
    --primary-foreground: var(--background);
    --secondary: var(--surface);
    --secondary-foreground: var(--text-primary);
    --muted: var(--surface);
    --muted-foreground: var(--text-secondary);
    --accent: var(--accent-primary);
    --accent-foreground: var(--background);
    --destructive: var(--status-bad);
    --destructive-foreground: var(--text-primary);
    
    /* Navigation */
    --navbar: var(--background);
    --navbar-foreground: var(--text-primary);
    --navbar-accent: var(--accent-primary);
    --navbar-border: var(--border);
    
    /* Sidebar */
    --sidebar-background: var(--background);
    --sidebar-foreground: var(--text-primary);
    --sidebar-primary: var(--accent-primary);
    --sidebar-primary-foreground: var(--background);
    --sidebar-accent: var(--surface);
    --sidebar-accent-foreground: var(--text-primary);
    --sidebar-border: var(--border);
    --sidebar-ring: var(--accent-primary);
    
    /* Chart Design Tokens */
    --chart-line: 270 91% 65%;              /* #8B5CF6 - mid purple */
    --chart-point: var(--accent-primary);   /* #A78BFA - accent */
    --chart-point-glow: var(--accent-primary); /* #A78BFA at 40% for glow */
    --chart-grid: var(--border);            /* #232445 - at 60% opacity */
    --chart-axis: var(--border);            /* #232445 */
    --chart-label: var(--text-secondary);   /* #BDB8E6 */
    --chart-background: transparent;
    
    /* Chat Components */
    --chat-user-bg: var(--accent-primary);
    --chat-user-fg: var(--background);
    --chat-ai-bg: var(--surface);
    --chat-ai-fg: var(--text-primary);
    --chat-suggestion: var(--surface);
    --chat-suggestion-hover: var(--border);
    
    --radius: 8px;
  }

  .dark {
    /* Dark mode uses same tokens as root */
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-sans;
    font-feature-settings: "cv11", "ss01";
    font-variation-settings: "opsz" 32;
  }

  /* Lila Mobile-First Typography System */
  .text-h1 {
    font-size: clamp(18px, 4.8vw, 22px);
    line-height: 1.3;
    @apply font-medium sm:font-medium lg:font-semibold text-[hsl(var(--text-primary))];
  }
  
  .text-section {
    font-size: clamp(16px, 3.6vw, 18px);
    line-height: 1.3;
    @apply font-medium text-[hsl(var(--text-primary))];
  }
  
  .text-body {
    font-size: clamp(14px, 3.2vw, 15px);
    line-height: 1.5;
    @apply font-normal text-[hsl(var(--text-primary))];
  }
  
  .text-caption {
    @apply text-[12px] leading-[16px] font-normal text-[hsl(var(--text-secondary))];
  }

  /* Mobile-First Page Padding */
  .page-padding {
    @apply px-4 md:px-5 lg:px-6;
  }

  /* Mobile Badge Styles */
  .badge-responsive {
    @apply text-[12px] md:text-xs;
  }

  /* Typography system - legacy */
  h1, h2, h3, h4, h5, h6 {
    @apply font-medium tracking-tight text-[hsl(var(--text-primary))];
  }
  
  h1 { @apply text-h1; }
  h2 { @apply text-section; }
  
  /* Global Icon Styles */
  .icon-default {
    @apply text-[hsl(var(--icon-default))] transition-colors;
  }
  
  .icon-default:hover {
    @apply text-[hsl(var(--icon-active))];
  }
  
  .icon-muted {
    @apply text-[hsl(var(--icon-muted))];
  }
  
  .icon-active {
    @apply text-[hsl(var(--icon-active))];
  }
}

/* Lila Component System */
@layer components {
  .chat-message-user {
    @apply bg-[hsl(var(--chat-user-bg))] text-[hsl(var(--chat-user-fg))] rounded-2xl rounded-br-sm px-4 py-3 max-w-xs sm:max-w-md lg:max-w-lg;
  }

  .chat-message-ai {
    @apply bg-[hsl(var(--chat-ai-bg))] text-[hsl(var(--chat-ai-fg))] rounded-2xl rounded-bl-sm px-4 py-3 max-w-xs sm:max-w-md lg:max-w-lg;
  }

  .chat-suggestion-pill {
    @apply bg-[hsl(var(--chat-suggestion))] hover:bg-[hsl(var(--chat-suggestion-hover))] 
           text-[hsl(var(--text-primary))] border border-border rounded-full px-4 py-2 text-sm font-normal
           cursor-pointer transition-colors duration-200;
  }

  .chat-input-area {
    @apply border-t border-border bg-background p-4;
  }

  .chat-input {
    @apply w-full rounded-xl border border-border bg-[hsl(var(--surface))] px-4 py-3 text-sm 
           placeholder:text-[hsl(var(--text-secondary))] text-[hsl(var(--text-primary))] 
           focus:outline-none focus:ring-2 focus:ring-[hsl(var(--accent-primary))] 
           focus:border-transparent resize-none;
  }

  .chat-send-button {
    @apply h-10 w-10 rounded-lg bg-[hsl(var(--accent-primary))] text-[hsl(var(--background))] 
           hover:bg-[hsl(var(--accent-hover))] disabled:opacity-50 disabled:cursor-not-allowed 
           transition-colors;
  }

  /* Navigation components */
  .nav-button {
    @apply px-3 py-2 rounded-lg text-sm font-medium transition-colors 
           text-[hsl(var(--text-secondary))] hover:text-[hsl(var(--text-primary))] 
           hover:bg-[hsl(var(--accent-primary))]/10;
  }

  .nav-button-active {
    @apply bg-[hsl(var(--accent-primary))]/20 text-[hsl(var(--accent-primary))];
  }

  /* Card components */
  .card-clean {
    @apply bg-[hsl(var(--surface))] text-[hsl(var(--text-primary))] rounded-xl 
           border border-[#232445] shadow-sm;
    padding: clamp(12px, 2vw, 20px);
  }

  /* Mobile-First Card Padding */
  .card-mobile {
    @apply p-3 sm:p-3 md:p-4 lg:p-5 border border-[#232445];
  }

  /* Form components */
  .input-clean {
    @apply w-full rounded-lg border border-[hsl(var(--border))] bg-[hsl(var(--surface))] 
           px-3 py-2 text-sm placeholder:text-[hsl(var(--text-secondary))] 
           text-[hsl(var(--text-primary))] focus:outline-none focus:ring-2 
           focus:ring-[hsl(var(--accent-primary))] focus:border-transparent;
  }

  .button-primary {
    @apply bg-[hsl(var(--accent-primary))] text-[hsl(var(--background))] 
           hover:bg-[hsl(var(--accent-hover))] rounded-lg px-4 py-2 
           text-sm font-medium transition-colors;
  }

  .button-secondary {
    @apply bg-[hsl(var(--surface))] text-[hsl(var(--text-primary))] 
           hover:bg-[hsl(var(--border))] rounded-lg px-4 py-2 text-sm font-medium transition-colors;
  }

  .button-ghost {
    @apply hover:bg-[hsl(var(--accent-primary))]/10 hover:text-[hsl(var(--accent-primary))] 
           rounded-lg px-4 py-2 text-sm font-medium transition-colors;
  }

  /* Onboarding specific */
  .onboarding-container {
    @apply min-h-screen flex items-center justify-center p-6 bg-gradient-to-br 
           from-[hsl(var(--background))] to-[hsl(var(--surface))];
  }

  .onboarding-card {
    @apply w-full max-w-2xl bg-[hsl(var(--surface))] rounded-2xl border 
           border-[hsl(var(--border))] shadow-lg p-8;
  }

  .onboarding-progress {
    @apply w-full bg-[hsl(var(--border))] rounded-full h-2;
  }

  .onboarding-progress-bar {
    @apply h-2 bg-[hsl(var(--accent-primary))] rounded-full transition-all duration-300;
  }

  /* Lila Pain Indicator System */
  .pain-indicator {
    @apply w-4 h-4 rounded-full text-xs flex items-center justify-center text-white font-medium;
  }

  .pain-indicator-container {
    @apply flex items-center justify-center;
  }

  .pain-indicator-severe {
    @apply bg-[hsl(var(--status-bad))];
  }

  .pain-indicator-moderate {
    @apply bg-[hsl(var(--status-warn))];
  }

  .pain-indicator-mild {
    @apply bg-[hsl(var(--status-ok))];
  }

  /* Lila Tab System - Mobile-First */
  .lila-tab-container {
    @apply flex gap-1 rounded-lg border border-[hsl(var(--border))] bg-transparent p-1;
  }

  .lila-tab-container-mobile {
    @apply flex gap-1 rounded-lg border border-[hsl(var(--border))] bg-transparent p-1 
           overflow-x-auto scrollbar-hide;
    -webkit-overflow-scrolling: touch;
  }

  .lila-tab {
    @apply px-3 py-2 rounded text-sm font-medium transition-all duration-200 
           text-[hsl(var(--text-secondary))] bg-transparent 
           hover:text-[hsl(var(--text-primary))] 
           focus:outline-none focus:ring-2 focus:ring-[hsl(var(--accent-primary))] focus:ring-offset-2 focus:ring-offset-background
           min-h-[44px] min-w-[44px] flex-shrink-0;
  }

  .lila-tab-active {
    @apply text-[hsl(var(--text-primary))] bg-[hsl(var(--surface))];
  }

  /* Chip/Tab Mobile Touch Target */
  .chip-mobile {
    @apply min-h-[44px] min-w-[44px] flex items-center justify-center px-4 py-2 
           rounded-full border border-[hsl(var(--border))] bg-[hsl(var(--surface))] 
           text-sm font-medium transition-colors whitespace-nowrap flex-shrink-0;
  }

  /* Chart components */
  .chart-container canvas {
    @apply transition-all duration-200;
  }
  
  .chart-point-glow {
    filter: drop-shadow(0 0 8px hsl(var(--chart-point) / 0.4));
  }
}

/* Animation utilities */
@layer utilities {
  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }

  .animate-slide-up {
    animation: slide-up 0.3s ease-out;
  }

  .animate-scale-in {
    animation: scale-in 0.2s ease-out;
  }

  /* Mobile-First Scroll Utilities */
  .scroll-mobile {
    @apply overflow-x-auto scrollbar-hide;
    -webkit-overflow-scrolling: touch;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Mobile Typography Weights */
  .font-light-mobile {
    @apply font-light lg:font-medium;
  }

  .font-medium-mobile {
    @apply font-medium lg:font-semibold;
  }
}

@keyframes fade-in {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slide-up {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes scale-in {
  from { transform: scale(0.95); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}